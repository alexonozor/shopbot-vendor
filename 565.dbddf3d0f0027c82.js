"use strict";(self.webpackChunkshopbot_restaurant=self.webpackChunkshopbot_restaurant||[]).push([[565],{6565:(N,c,n)=>{n.r(c),n.d(c,{AuthModule:()=>r});var s=n(4006),g=n(6895),u=n(9299),p=n(8746),t=n(4650),x=n(629),v=n(7253),Z=n(7009),f=n(4144),l=n(9549),d=n(1576),y=n(4859),b=n(7392),T=n(6709);function L(e,o){1&e&&(t.TgZ(0,"mat-hint",18),t._uU(1," This field is required. "),t.qZA())}function A(e,o){1&e&&(t.TgZ(0,"mat-hint",18),t._uU(1," Email must be a valid email address "),t.qZA())}function w(e,o){if(1&e&&(t.TgZ(0,"mat-hint"),t.YNc(1,L,2,0,"mat-hint",17),t.YNc(2,A,2,0,"mat-hint",17),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.email.errors.email)}}function U(e,o){1&e&&(t.TgZ(0,"Label",18),t._uU(1," This field is required. "),t.qZA())}function C(e,o){1&e&&(t.TgZ(0,"Label",18),t._uU(1," Password length must be greater than 6 character. "),t.qZA())}function I(e,o){if(1&e&&(t.TgZ(0,"mat-hint"),t.YNc(1,U,2,0,"Label",17),t.YNc(2,C,2,0,"Label",17),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.password.errors.minlength)}}class m{constructor(o,i,h,k,Y){this.auth=o,this.fb=i,this.jwtService=h,this.router=k,this._snackBar=Y,this.check=!1,this.isLoading=!1,this.loginInvalid=!1,this.horizontalPosition="center",this.verticalPosition="top",this.showPassword=!1,this.submitted=!1,this.userForm=i.group({email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(6)]]})}ngOnInit(){this.jwtService.destroyToken()}get f(){return this.userForm.controls}onSubmit(){this.submitted=!0,this.userForm.valid&&(this.isLoading=!0,this.auth.login(this.userForm.getRawValue()).pipe((0,p.x)(()=>this.isLoading=!1)).subscribe(o=>{200==o.status?(this.auth.saveToken(o.access_token),this.getUser(o.email)):this.openSnackBar(o.msg)},o=>{console.log(o)}))}openSnackBar(o){this._snackBar.open(o,"ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}getUser(o){this.auth.getMerchantByEmail(o).subscribe(i=>{this.auth.saveUser(i),setTimeout(()=>{this.router.navigate(["dashboards"])},200)})}}m.\u0275fac=function(o){return new(o||m)(t.Y36(x.e),t.Y36(s.qu),t.Y36(v.T),t.Y36(u.F0),t.Y36(Z.ux))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-login"]],decls:28,vars:7,consts:[[2,"height","100vh"],["fxLayout","column","fxLayoutAlign","center center",1,"px-6","py-8","mx-auto","h-screen","lg:py-0"],[1,"flex","items-center","mb-3","text-2xl","font-semibold","text-gray-900","dark:text-white"],["width","250","height","250","src","assets/shopbot.png","alt","logo"],[1,"text-center","leading-tight","mb-3","tracking-tight","px-6","md:text-lg"],[1,"w-full","md:mt-0","sm:max-w-md","xl:p-0"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],["autocomplete","off",1,"space-y-4","md:space-y-6",3,"formGroup","ngSubmit"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","email","placeholder","Email"],["matSuffix","",1,"material-icons-outlined"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Password",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"material-icons-outlined"],[1,"example-margin"],["mat-button-raised","","color","primary",1,"w-full","text-white","bg-primary-600","hover:bg-primary-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"disabled"],["class","text-red-500 text-xs",4,"ngIf"],[1,"text-red-500","text-xs"]],template:function(o,i){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"p",4),t._uU(5,"Login to access your stores and start making sales."),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",9),t.TgZ(13,"mat-icon",10),t._uU(14,"account_circle"),t.qZA(),t.YNc(15,w,3,2,"mat-hint",11),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Password"),t.qZA(),t._UZ(19,"input",12),t.TgZ(20,"a",13),t.NdJ("click",function(){return i.showPassword=!i.showPassword}),t.TgZ(21,"mat-icon",14),t._uU(22),t.qZA()(),t.YNc(23,I,3,2,"mat-hint",11),t.qZA(),t.TgZ(24,"mat-checkbox",15),t._uU(25,"Keep me logged in"),t.qZA(),t.TgZ(26,"button",16),t._uU(27),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("formGroup",i.userForm),t.xp6(7),t.Q6J("ngIf",i.submitted&&i.f.email.errors),t.xp6(4),t.Q6J("type",i.showPassword?"text":"password"),t.xp6(3),t.Oqu(i.showPassword?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",i.submitted&&i.f.password.errors),t.xp6(3),t.Q6J("disabled",i.isLoading),t.xp6(1),t.Oqu(i.isLoading?"Checking...":"Sign in"))},dependencies:[g.O5,f.Nt,l.KE,l.hX,l.bx,l.R9,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.xw,d.Wh,y.o6,b.Hw,T.oG]});const J=[{path:"",component:m}];class a{}a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.Bz.forChild(J),u.Bz]});var P=n(9814),S=n(1077);class r{}r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.ez,f.c,a,s.UX,P.o9,S.q]})}}]);